<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · ModelAnalysis.jl</title><meta name="title" content="API · ModelAnalysis.jl"/><meta property="og:title" content="API · ModelAnalysis.jl"/><meta property="twitter:title" content="API · ModelAnalysis.jl"/><meta name="description" content="Documentation for ModelAnalysis.jl."/><meta property="og:description" content="Documentation for ModelAnalysis.jl."/><meta property="twitter:description" content="Documentation for ModelAnalysis.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ModelAnalysis.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../ensembles/">Ensembles</a></li><li><a class="tocitem" href="../plotting-with-makie/">Plotting with Makie</a></li><li class="is-active"><a class="tocitem" href>API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/fesmc/ModelAnalysis.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/fesmc/ModelAnalysis.jl/blob/main/docs/src/modelanalysis-api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ModelAnalysis-API"><a class="docs-heading-anchor" href="#ModelAnalysis-API">ModelAnalysis API</a><a id="ModelAnalysis-API-1"></a><a class="docs-heading-anchor-permalink" href="#ModelAnalysis-API" title="Permalink"></a></h1><article><details class="docstring" open="true"><summary id="ModelAnalysis.Colorbar_logdiff!-Tuple{Any, Any}"><a class="docstring-binding" href="#ModelAnalysis.Colorbar_logdiff!-Tuple{Any, Any}"><code>ModelAnalysis.Colorbar_logdiff!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Colorbar_logdiff!(fig_now,hmpos)</code></pre><p>TBW</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Plots.jl#L104-L108">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.clean-Tuple{Any}"><a class="docstring-binding" href="#ModelAnalysis.clean-Tuple{Any}"><code>ModelAnalysis.clean</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Clean a variable, so that:</p><ul><li>missing values are replaced with NaNs </li><li>values outside of mask are set to NaN </li><li>values outside of desired range are set to limits or NaN</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Functions.jl#L8-L13">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.contour3D_ice2D_topo!-NTuple{4, Any}"><a class="docstring-binding" href="#ModelAnalysis.contour3D_ice2D_topo!-NTuple{4, Any}"><code>ModelAnalysis.contour3D_ice2D_topo!</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Add surface elevation or ice thickness contours to a predefined axis. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Plots_ice.jl#L156-L158">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.contour_ice2D_bath!-NTuple{4, Any}"><a class="docstring-binding" href="#ModelAnalysis.contour_ice2D_bath!-NTuple{4, Any}"><code>ModelAnalysis.contour_ice2D_bath!</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Add bathymetry contours to a predefined axis. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Plots_ice.jl#L134-L136">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.contour_ice2D_topo!-NTuple{4, Any}"><a class="docstring-binding" href="#ModelAnalysis.contour_ice2D_topo!-NTuple{4, Any}"><code>ModelAnalysis.contour_ice2D_topo!</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Add surface elevation or ice thickness contours to a predefined axis. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Plots_ice.jl#L144-L146">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.heatmap_ice2D_bathymetry!-NTuple{4, Any}"><a class="docstring-binding" href="#ModelAnalysis.heatmap_ice2D_bathymetry!-NTuple{4, Any}"><code>ModelAnalysis.heatmap_ice2D_bathymetry!</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Add bathymetry shading to a predefined axis.  By default, greyshading used, with dark at z=colorrange[1] to white at z=colorrange[2]. z_bed should be modified externally before using this routine (masking, etc) to facilitate making animations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Plots_ice.jl#L119-L124">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.heatmapclip!-Tuple"><a class="docstring-binding" href="#ModelAnalysis.heatmapclip!-Tuple"><code>ModelAnalysis.heatmapclip!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">heatmapclip!(args...; scale=identity, colorrange=nothing, colormap=nothing, tol=1e-6, kwargs...)</code></pre><p>Create a heatmap with automatic clipping indicators on the colorbar.</p><p>This function extends <code>Makie.heatmap!</code> by automatically setting <code>lowclip</code> and <code>highclip</code>  colors when data values fall outside the specified <code>colorrange</code>. Clipped values are  indicated by colored triangles at the ends of the colorbar using the first and last  colors of the colormap.</p><p><strong>Arguments</strong></p><ul><li><code>args...</code>: Positional arguments matching any <code>heatmap!</code> signature:<ul><li><code>heatmapclip!(ax, z)</code>: Plot matrix <code>z</code> on axis <code>ax</code></li><li><code>heatmapclip!(ax, x, y, z)</code>: Plot matrix <code>z</code> with coordinates <code>x</code>, <code>y</code> on axis <code>ax</code></li></ul></li></ul><p><strong>Keywords</strong></p><ul><li><code>scale=identity</code>: Function to transform data values (e.g., <code>log10</code>, <code>sqrt</code>). Applied to  both <code>z</code> and <code>colorrange</code>.</li><li><code>colorrange=nothing</code>: Tuple <code>(low, high)</code> defining the color scale limits. If <code>nothing</code>,  defaults to <code>(minimum(z), maximum(z))</code> (excluding NaN values).</li><li><code>colormap=nothing</code>: Colormap to use. If <code>nothing</code>, defaults to <code>ColorSchemes.roma</code>.</li><li><code>tol=1e-6</code>: Tolerance for determining if data extends beyond <code>colorrange</code>. Values below  <code>colorrange[1] - tol</code> trigger <code>lowclip</code>; values above <code>colorrange[2] + tol</code> trigger <code>highclip</code>.</li><li><code>kwargs...</code>: Additional keyword arguments passed to <code>heatmap!</code>.</li></ul><p><strong>Returns</strong></p><ul><li>Returns the heatmap plot object <code>hm</code></li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using CairoMakie, ColorSchemes

# Basic usage with automatic clipping
z = randn(20, 20) # data range ±3
fig = Figure(); ax = Axis(fig[1, 1])
hm = heatmapclip!(ax, z, colorrange=(-1, 1))
Colorbar(fig[1, 2],hm)
fig

# To see automatic clipping changes,
# change colorrange:
colorrange=(-4, 1) # no lowclip
colorrange=(-1, 4) # no highclip
colorrange=(-4, 4) # no lowclip or highclip</code></pre><p><strong>Notes</strong></p><ul><li>NaN values in <code>z</code> are automatically excluded when computing data range</li><li>Clipping indicators only appear when data actually extends beyond <code>colorrange</code> (within <code>tol</code>)</li><li>The <code>scale</code> transformation is applied after clipping detection. It is applied both to <code>z</code> and <code>colorrange</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Plots.jl#L247-L297">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.preprocess_ice2D_variable-Tuple{Any}"><a class="docstring-binding" href="#ModelAnalysis.preprocess_ice2D_variable-Tuple{Any}"><code>ModelAnalysis.preprocess_ice2D_variable</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Preprocess variable for plotting</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Plots_ice.jl#L31-L33">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.print_row-Tuple{Any}"><a class="docstring-binding" href="#ModelAnalysis.print_row-Tuple{Any}"><code>ModelAnalysis.print_row</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Print a row of data transposed</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Functions.jl#L54-L56">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.Ensembles.Ensemble-NTuple{6, Any}"><a class="docstring-binding" href="#ModelAnalysis.Ensembles.Ensemble-NTuple{6, Any}"><code>ModelAnalysis.Ensembles.Ensemble</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Ensemble(args...; sort_by=&quot;&quot;)</p><p>Create an <code>Ensemble</code> object, which stores simulation members, paths, and associated metadata.</p><p><strong>Construction Methods</strong></p><ol><li><strong>From explicit components:</strong></li></ol><pre><code class="language-julia hljs">Ensemble(N, path, set, p, s, v)</code></pre><ul><li><code>N::Int</code>: Number of ensemble members.</li><li><code>path::Vector{String}</code>: Paths to simulations.</li><li><code>set::Vector{Int}</code>: Indicates which ensemble set each member belongs to.</li><li><code>p::DataFrame</code>: Ensemble info table.</li><li><code>s::DataFrame</code>: Plotting parameters table.</li><li><code>v</code>: Optional additional data. This constructor sets internal weights to <code>nothing</code> and stores <code>v</code>.</li></ul><ol><li><strong>From a single ensemble directory:</strong></li></ol><pre><code class="language-julia hljs">Ensemble(ens_path::String; sort_by=&quot;&quot;)</code></pre><ul><li><code>ens_path</code>: Path to the ensemble directory or single simulation.</li><li><code>sort_by</code>: Optional column name in the info table to sort the members.</li></ul><ol><li><strong>From multiple ensemble directories:</strong></li></ol><pre><code class="language-julia hljs">Ensemble(ens_path::Vector{String}; sort_by=&quot;&quot;)</code></pre><ul><li><code>ens_path</code>: Vector of paths to ensemble directories.</li><li><code>sort_by</code>: Optional column name to sort the combined members.</li></ul><p><strong>Returns</strong></p><p>An <code>Ensemble</code> object containing:</p><ul><li><code>N</code>: Number of members.</li><li><code>path</code>: Vector of paths to simulations.</li><li><code>set</code>: Vector indicating the set of each member.</li><li><code>p</code>: DataFrame with ensemble info.</li><li><code>s</code>: DataFrame with plotting parameters.</li><li><code>weights</code>: Optional weights or <code>nothing</code>.</li><li><code>v</code>: Optional additional data.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Ensembles.jl#L187-L236">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.Ensembles.collect_variable-Tuple{AbstractEnsemble, Symbol, Symbol}"><a class="docstring-binding" href="#ModelAnalysis.Ensembles.collect_variable-Tuple{AbstractEnsemble, Symbol, Symbol}"><code>ModelAnalysis.Ensembles.collect_variable</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>collect_variable(ens::AbstractEnsemble, domain::Symbol, var::Symbol; default=missing)</p><p>Collects a specified variable <code>var</code> from the given <code>domain</code> across all model members in an ensemble <code>ens</code>.</p><p><strong>Arguments</strong></p><ul><li><code>ens::AbstractEnsemble</code>: An ensemble object containing multiple model members.</li><li><code>domain::Symbol</code>: The domain key within each model run (e.g., <code>:atm</code>, <code>:ocn</code>) from which to extract the variable.</li><li><code>var::Symbol</code>: The variable key to collect (e.g., <code>:t2m</code>, <code>:sst</code>).</li><li><code>default</code>: Optional keyword argument specifying the value to use if the variable <code>var</code> is not present in a particular model run’s domain dictionary. Defaults to <code>missing</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A vector where each element corresponds to the value of <code>var</code> in the specified <code>domain</code> for each model run in the ensemble. If a model run does not contain the variable, the <code>default</code> value is used instead.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">t2m_values = collect_variable(ensemble, :atm, :t2m)
sst_values = collect_variable(ensemble, :ocn, :sst; default=nothing)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Ensembles.jl#L544-L564">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.Ensembles.ensemble_init-Tuple{String}"><a class="docstring-binding" href="#ModelAnalysis.Ensembles.ensemble_init-Tuple{String}"><code>ModelAnalysis.Ensembles.ensemble_init</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">ensemble_init(ens_path::String;sort_by=&quot;&quot;,verbose=true)</code></pre><p>Initialize an ensemble from a directory path. Reads <code>info.txt</code> if present to build a DataFrame of ensemble members; otherwise assumes a single simulation. Returns a tuple <code>(N, path, set, p, s)</code> with the number of members, paths to each simulation, a placeholder integer array, the ensemble info DataFrame, and a DataFrame of plotting parameters. Optionally sorts the ensemble by a column in the info DataFrame if <code>sort_by</code> is given. Prints summary information if <code>verbose</code> is <code>true</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Ensembles.jl#L56-L65">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ModelAnalysis.Ensembles.ensemble_init-Tuple{Vector{String}}"><a class="docstring-binding" href="#ModelAnalysis.Ensembles.ensemble_init-Tuple{Vector{String}}"><code>ModelAnalysis.Ensembles.ensemble_init</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">ensemble_init(ens_path::Vector{String};sort_by=&quot;&quot;,verbose=true)</code></pre><p>Initialize an ensemble from multiple directories. Calls the single-path <code>ensemble_init</code> for each entry in <code>ens_path</code> and combines the results, returning a tuple <code>(N, path, set, p, s)</code>     with the total number of members, paths to all simulations, a vector indicating which set     each member belongs to, a combined ensemble info DataFrame, and a combined plotting parameters     DataFrame. Optionally sorts all members by a column in the DataFrame if <code>sort_by</code> is given.     Prints a summary if <code>verbose</code> is <code>true</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fesmc/ModelAnalysis.jl/blob/87306a5cafc73bcfaa42c73d8c4bf671d0cad526/src/Ensembles.jl#L137-L146">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../plotting-with-makie/">« Plotting with Makie</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Thursday 22 January 2026 16:05">Thursday 22 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
